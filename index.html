<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>DISTRI EL URU | Cat√°logo Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        
        :root { --accent: #ff6b00; }
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #0f0f0f; color: #f0f0f0; transition: all 0.3s ease; }
        
        /* Glassmorphism */
        .glass { background: rgba(44, 44, 44, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.05); }
        
        /* Marquesina */
        @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
        .animate-marquee { display: flex; width: max-content; animation: marquee 25s linear infinite; }

        /* Badge Novedades Animado */
        .new-arrival { border: 2px solid var(--accent) !important; animation: borderPulse 2s infinite; }
        @keyframes borderPulse { 0% { border-color: #ff6b00; } 50% { border-color: #ffb380; } 100% { border-color: #ff6b00; } }

        .cat-active { background: var(--accent) !important; color: white !important; box-shadow: 0 10px 15px -3px rgba(255, 107, 0, 0.4); }
        
        /* Bot√≥n Voz animado */
        .mic-active { color: #ef4444; animation: pulse-red 1.5s infinite; }
        @keyframes pulse-red { 0% { transform: scale(1); } 50% { transform: scale(1.2); } 100% { transform: scale(1); } }

        .back-to-top { opacity: 0; visibility: hidden; transition: 0.3s; }
        .back-to-top.show { opacity: 1; visibility: visible; }
    </style>
</head>
<body class="selection:bg-orange-500/30">

    <div class="bg-black text-orange-500 py-2 overflow-hidden border-b border-white/5">
        <div class="animate-marquee gap-10 font-black text-[10px] uppercase tracking-[0.3em]">
            <span>üöö ENVIOS VIEDMA Y PATAGONES</span>
            <span>‚ö° COMPRA ANTES DE LAS 12:30 Y RECIB√ç HOY</span>
            <span>üî• PRECIOS MAYORISTAS</span>
            <span>üöö ENVIOS VIEDMA Y PATAGONES</span>
        </div>
    </div>

    <div id="status-bar" class="py-2 px-4 text-center text-white">
        <p id="status-text" class="text-[9px] font-extrabold uppercase tracking-widest"></p>
    </div>

    <nav class="glass sticky top-0 z-[100] p-4 border-b border-white/10">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="relative">
                    <img src="https://i.ibb.co/yB7ffL4T/unnamed.jpg" class="w-12 h-12 rounded-2xl border-2 border-orange-500 object-contain bg-black shadow-lg">
                    <div class="absolute -bottom-1 -right-1 w-4 h-4 bg-green-500 border-2 border-black rounded-full"></div>
                </div>
                <div>
                    <h1 class="text-lg font-extrabold text-white leading-none uppercase tracking-tighter">El Uru</h1>
                    <p class="text-[7px] font-bold text-orange-500 uppercase tracking-widest">Distribuidora</p>
                </div>
            </div>
            
            <div class="flex items-center gap-3">
                <button onclick="compartir()" class="text-white/60 hover:text-orange-500 transition-colors text-lg"><i class="fas fa-share-nodes"></i></button>
                <button onclick="document.getElementById('cart').style.display='flex'" class="bg-orange-600 text-white p-3 rounded-2xl font-black shadow-xl flex items-center gap-2 active:scale-90 transition-transform">
                    <i class="fas fa-cart-shopping"></i>
                    <span id="count" class="text-sm">0</span>
                </button>
            </div>
        </div>
    </nav>

    <div class="p-4 md:p-8 max-w-5xl mx-auto space-y-6">
        <div class="relative group">
            <input type="text" id="search" onkeyup="render()" placeholder="Buscar bebida, marca..." 
                class="w-full p-5 pl-14 rounded-3xl bg-white/5 border border-white/10 text-white font-semibold outline-none focus:border-orange-500 focus:bg-white/10 transition-all">
            <i class="fas fa-search absolute left-6 top-1/2 -translate-y-1/2 text-white/20 group-focus-within:text-orange-500 transition-colors"></i>
            <button onclick="startVoiceSearch()" class="absolute right-5 top-1/2 -translate-y-1/2 text-white/30 hover:text-white" id="mic-btn">
                <i class="fas fa-microphone"></i>
            </button>
        </div>

        <button onclick="toggleNovedades()" id="btn-novedades" class="w-full py-4 rounded-2xl bg-gradient-to-r from-orange-600 to-orange-400 text-white font-black text-xs uppercase shadow-lg shadow-orange-600/20 active:scale-95 transition-all flex items-center justify-center gap-3">
            <i class="fas fa-bolt"></i> Ver Ingresos <span id="novedades-count" class="bg-white/20 px-2 py-0.5 rounded-lg text-[10px]">0</span>
        </button>
    </div>

    <div class="px-4 max-w-5xl mx-auto flex gap-3 overflow-x-auto pb-8 no-scrollbar" id="category-filters"></div>

    <main id="catalogo" class="p-4 max-w-6xl mx-auto grid grid-cols-2 md:grid-cols-4 gap-4 pb-32"></main>

    <footer class="bg-black border-t border-white/10 p-10 mt-20 text-center">
        <div class="max-w-6xl mx-auto grid md:grid-cols-3 gap-10">
            <div class="space-y-4">
                <h3 class="text-orange-500 font-black uppercase text-sm tracking-widest">Atenci√≥n</h3>
                <p class="text-white/60 text-xs">Lunes a S√°bados<br>Viedma & Patagones</p>
            </div>
            <div class="space-y-4">
                <h3 class="text-orange-500 font-black uppercase text-sm tracking-widest">Seguinos</h3>
                <div class="flex justify-center gap-4">
                    <a href="https://www.instagram.com/distri_el_uru/" class="w-12 h-12 rounded-2xl bg-white/5 flex items-center justify-center text-xl hover:text-orange-500 transition-all"><i class="fab fa-instagram"></i></a>
                    <a href="https://wa.me/5492920248292" class="w-12 h-12 rounded-2xl bg-white/5 flex items-center justify-center text-xl hover:text-green-500 transition-all"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            <div class="h-40 rounded-3xl overflow-hidden bg-white/5 opacity-40">
                <iframe src="http://google.com/maps" width="100%" height="100%" style="border:0;" loading="lazy"></iframe>
            </div>
        </div>
    </footer>

    <button id="to-top" onclick="window.scrollTo({top:0, behavior:'smooth'})" class="back-to-top fixed bottom-24 right-6 w-12 h-12 bg-white/10 text-white rounded-full glass z-50 flex items-center justify-center shadow-2xl">
        <i class="fas fa-arrow-up"></i>
    </button>
    
    <a href="https://wa.me/5492920248292" target="_blank" class="fixed bottom-6 right-6 z-50 bg-green-500 text-white p-4 rounded-2xl shadow-2xl hover:scale-110 active:scale-90 transition-all">
        <i class="fab fa-whatsapp text-3xl"></i>
    </a>

    <div id="cart" style="display:none;" class="fixed inset-0 bg-black/95 z-[200] flex justify-end">
        <div class="w-full max-w-md bg-[#121212] h-full flex flex-col p-6">
            <div class="flex justify-between items-center mb-10">
                <h2 class="text-2xl font-black uppercase italic tracking-tighter">Pedido</h2>
                <button onclick="document.getElementById('cart').style.display='none'" class="text-4xl text-white/20">&times;</button>
            </div>
            
            <div id="cart-items" class="flex-1 overflow-y-auto space-y-4 pr-2 no-scrollbar"></div>

            <div class="mt-auto space-y-4 pt-6 border-t border-white/10">
                <div class="space-y-3">
                    <input type="text" id="user-name" placeholder="Nombre / Local" class="w-full p-4 rounded-2xl bg-white/5 border border-white/10 outline-none focus:border-orange-500 text-white">
                    <input type="text" id="user-address" placeholder="Direcci√≥n" class="w-full p-4 rounded-2xl bg-white/5 border border-white/10 outline-none focus:border-orange-500 text-white">
                </div>
                <div class="flex justify-between items-end p-2">
                    <span class="text-white/40 text-[10px] font-bold uppercase tracking-widest">Subtotal</span>
                    <span class="text-2xl font-black text-orange-500 italic">$<span id="total">0</span></span>
                </div>
                <button onclick="enviar()" class="w-full bg-green-600 hover:bg-green-500 text-white py-5 rounded-3xl font-black text-lg shadow-xl shadow-green-900/20 flex items-center justify-center gap-3 transition-all">
                    <i class="fab fa-whatsapp"></i> ENVIAR POR WHATSAPP
                </button>
            </div>
        </div>
    </div>

    <script>
        const TSV = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQEemzCvTezcjzZhIUIRIayZ7U81xgssl9G1Vr6Odx7dHGHOARY0iJ-VOL43E17qLVkiIRb0LTurcZU/pub?output=tsv';
        let data = [], cart = {}, activeCat = 'TODOS', soloNovedades = false;

        async function load() {
            try {
                const res = await fetch(TSV + '&t=' + Date.now());
                const text = await res.text();
                const lines = text.split(/\r?\n/).slice(1);
                data = lines.map((l, i) => {
                    const c = l.split('\t');
                    return { id: i, nom: (c[0]||'').trim(), pre: parseInt((c[1]||'').replace(/\D/g,'')) || 0, cat: (c[2]||'VARIOS').trim().toUpperCase(), img: (c[3]||'').trim() };
                }).filter(p => p.nom !== "");
                
                document.getElementById('novedades-count').innerText = data.filter(p => p.pre % 10 === 1).length;
                renderCats(); render(); updateStatus();
            } catch (e) { console.error(e); }
        }

        function updateStatus() {
            const now = new Date();
            const hour = now.getHours();
            const min = now.getMinutes();
            const bar = document.getElementById('status-bar');
            const txt = document.getElementById('status-text');
            if (hour < 12 || (hour === 12 && min < 30)) {
                bar.className = "bg-green-500/10 border-b border-green-500/20 py-2 px-4 text-center";
                txt.className = "text-green-500 text-[9px] font-black uppercase tracking-widest";
                txt.innerHTML = "üü¢ Tomando pedidos para hoy hasta 12:30hs";
            } else {
                bar.className = "bg-orange-500/10 border-b border-orange-500/20 py-2 px-4 text-center";
                txt.className = "text-orange-500 text-[9px] font-black uppercase tracking-widest";
                txt.innerHTML = "üïí Pedidos recibidos para entrega ma√±ana";
            }
        }

        window.onscroll = () => {
            const btn = document.getElementById('to-top');
            if (window.scrollY > 400) btn.classList.add('show');
            else btn.classList.remove('show');
        };

        function startVoiceSearch() {
            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            const micBtn = document.getElementById('mic-btn');
            recognition.onstart = () => micBtn.classList.add('mic-active');
            recognition.onresult = (event) => {
                document.getElementById('search').value = event.results[0][0].transcript;
                render();
                micBtn.classList.remove('mic-active');
            };
            recognition.onerror = () => micBtn.classList.remove('mic-active');
            recognition.start();
        }

        function toggleNovedades() {
            soloNovedades = !soloNovedades;
            document.getElementById('btn-novedades').classList.toggle('from-orange-400', !soloNovedades);
            renderCats(); render();
        }

        function renderCats() {
            const cats = ['TODOS', ...new Set(data.map(p => p.cat))];
            document.getElementById('category-filters').innerHTML = cats.map(c => `
                <button onclick="activeCat='${c}'; soloNovedades=false; renderCats(); render();" 
                class="shrink-0 px-8 py-4 rounded-2xl bg-white/5 text-[10px] font-black uppercase transition-all ${activeCat === c && !soloNovedades ? 'cat-active' : 'text-white/40'}">${c}</button>
            `).join('');
        }

        function render() {
            const q = document.getElementById('search').value.toLowerCase();
            let filtered = data.filter(p => (activeCat === 'TODOS' || p.cat === activeCat) && p.nom.toLowerCase().includes(q));
            if(soloNovedades) filtered = data.filter(p => (p.pre % 10 === 1) && p.nom.toLowerCase().includes(q));

            document.getElementById('catalogo').innerHTML = filtered.map(p => {
                const qty = cart[p.id] || 0;
                const esNuevo = p.pre % 10 === 1;
                return `
                    <div class="bg-white/5 p-4 rounded-[2.5rem] border border-white/5 flex flex-col ${esNuevo ? 'new-arrival' : ''}">
                        ${esNuevo ? `<span class="new-badge">NUEVO</span>` : ''}
                        <div class="h-32 mb-4 flex items-center justify-center p-2"><img src="${p.img}" class="max-h-full object-contain" onerror="this.src='https://i.ibb.co/yB7ffL4T/unnamed.jpg'"></div>
                        <h3 class="text-[10px] font-extrabold text-white uppercase leading-tight h-8 mb-1">${p.nom}</h3>
                        <p class="text-orange-500 font-black text-lg italic">$${p.pre.toLocaleString()}</p>
                        <div class="mt-4 bg-black/40 p-1.5 rounded-2xl flex items-center gap-1">
                            ${qty > 0 ? `
                                <button onclick="add(${p.id},-1)" class="w-10 h-10 bg-white/10 rounded-xl font-black text-white">-</button>
                                <span class="flex-1 text-center font-black text-white text-xs">${qty}</span>
                                <button onclick="add(${p.id},1)" class="w-10 h-10 bg-orange-600 rounded-xl font-black text-white">+</button>
                            ` : `
                                <button onclick="add(${p.id},1)" class="w-full bg-white/5 py-4 rounded-xl font-black text-[10px] uppercase text-white/60 hover:bg-orange-600 hover:text-white transition-all">Agregar</button>
                            `}
                        </div>
                    </div>`;
            }).join('');
        }

        window.add = (id, n) => { cart[id] = Math.max(0, (cart[id] || 0) + n); if (cart[id] === 0) delete cart[id]; update(); };
        
        function update() {
            let t = 0, c = 0, html = '';
            Object.entries(cart).forEach(([id, q]) => {
                const p = data[id]; t += p.pre * q; c += q;
                html += `<div class="flex items-center gap-4 bg-white/5 p-4 rounded-3xl border border-white/10"><img src="${p.img}" class="w-12 h-12 object-contain"><div class="flex-1"><h4 class="font-bold text-[9px] text-white uppercase">${p.nom}</h4><p class="text-orange-500 font-black italic">$${(p.pre * q).toLocaleString()}</p></div><button onclick="add(${id},-${q})" class="text-white/10"><i class="fas fa-trash"></i></button></div>`;
            });
            document.getElementById('cart-items').innerHTML = html || '<p class="text-center py-20 opacity-20 font-black uppercase tracking-widest text-[10px]">Vac√≠o</p>';
            document.getElementById('total').innerText = t.toLocaleString();
            document.getElementById('count').innerText = c;
            render();
        }

        function compartir() {
            navigator.share ? navigator.share({ title: 'Distri El Uru', url: window.location.href }) : alert("Copia el link de arriba");
        }

        function enviar() {
            const n = document.getElementById('user-name').value;
            const d = document.getElementById('user-address').value;
            if (!n || !d || Object.keys(cart).length === 0) return alert("Faltan datos.");
            let m = "*PEDIDO - EL URU*%0Aüë§ " + n + "%0Aüìç " + d + "%0A%0A";
            Object.entries(cart).forEach(([id, q]) => m += "‚úÖ *" + q + "* x " + data[id].nom + "%0A");
            m += "%0A*TOTAL: $" + document.getElementById('total').innerText + "*";
            window.open("https://wa.me/5492920248292?text=" + m);
        }
        load();
        setInterval(updateStatus, 30000);
    </script>
</body>
</html>
