<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <title>DISTRI EL URU | Cat√°logo Premium</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap');
        
        /* VARIABLES Y TEMAS */
        body.dark-mode { 
            background-color: #1a1a1a; 
            color: #e0e0e0; 
        }
        body.light-mode { 
            background-color: #f3f4f6; 
            color: #1f2937; 
        }
        body { 
            font-family: 'Inter', sans-serif; 
            transition: background 0.4s ease; 
            scroll-behavior: smooth; 
            -webkit-tap-highlight-color: transparent;
        }
        
        /* UTILIDADES */
        .no-scrollbar::-webkit-scrollbar { display: none; }

        /* MARQUESINA ANIMADA */
        @keyframes marquee { 
            0% { transform: translateX(0); } 
            100% { transform: translateX(-50%); } 
        }
        .animate-marquee { 
            display: flex; 
            width: max-content; 
            animation: marquee 25s linear infinite; 
        }

        /* ALERTAS Y ESTADOS */
        @keyframes pulse-red { 
            0%, 100% { opacity: 1; } 
            50% { opacity: 0.5; background-color: #ef4444; } 
        }
        .urgent { animation: pulse-red 1s infinite; }

        /* EFECTOS DE CARGA (SKELETON) */
        .skeleton { 
            background: linear-gradient(90deg, #222 25%, #333 50%, #222 75%); 
            background-size: 200% 100%; 
            animation: loading 1.5s infinite; 
            border-radius: 2rem; 
        }
        @keyframes loading { 
            0% { background-position: 200% 0; } 
            100% { background-position: -200% 0; } 
        }

        /* TARJETAS DE PRODUCTO */
        .card-prod { 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            border-width: 2px;
            border-color: transparent;
        }
        .card-prod:hover { 
            transform: translateY(-8px); 
            box-shadow: 0 15px 30px rgba(0,0,0,0.3); 
        }
        .card-prod:hover img { transform: scale(1.1); }
        .card-selected { 
            border-color: #ff6b00 !important; 
            background: rgba(255, 107, 0, 0.05) !important;
        }
        
        .img-zoom { transition: transform 0.4s ease; }
        
        /* BOTONES DE CATEGOR√çA */
        .cat-active { 
            background-color: #ff6b00 !important; 
            color: white !important; 
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(255, 107, 0, 0.3);
        }

        /* BOT√ìN SUBIR */
        #go-up { 
            display: none; 
            position: fixed; 
            bottom: 110px; 
            right: 24px; 
            z-index: 90; 
            background: #ff6b00; 
            color: white; 
            width: 50px; 
            height: 50px; 
            border-radius: 50%; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.3); 
            border: none; 
            outline: none; 
            transition: all 0.3s ease;
        }
        #go-up:active { transform: scale(0.9); }

        /* BADGES */
        .oferta-badge {
            position: absolute;
            top: 15px;
            right: -8px;
            background: #ef4444;
            color: white;
            font-size: 10px;
            font-weight: 900;
            padding: 5px 15px;
            border-radius: 8px 0 0 8px;
            box-shadow: -2px 2px 10px rgba(239, 68, 68, 0.4);
            text-transform: uppercase;
            z-index: 20;
            animation: bounce-tag 2s infinite;
        }
        @keyframes bounce-tag { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(-4px); } }

        /* ANIMACIONES DE ACCI√ìN */
        .btn-added-anim { 
            animation: tap-bounce 0.4s ease; 
            background-color: #22c55e !important; 
        }
        @keyframes tap-bounce { 
            0% { transform: scale(1); } 
            50% { transform: scale(0.9); } 
            100% { transform: scale(1); } 
        }

        /* BARRA DE PROGRESO M√çNIMO */
        #min-purchase-bar { 
            height: 8px; 
            background: #333; 
            border-radius: 10px; 
            overflow: hidden; 
            margin: 12px 0; 
            border: 1px solid #444;
        }
        #min-purchase-fill { 
            height: 100%; 
            background: linear-gradient(90deg, #ff6b00, #ff9e00); 
            width: 0%; 
            transition: width 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        
        .btn-disabled { 
            background-color: #4b5563 !important; 
            opacity: 0.5; 
            cursor: not-allowed; 
            pointer-events: none; 
        }
        
        /* CONTADORES */
        .cat-count { 
            background: rgba(0,0,0,0.3); 
            padding: 2px 8px; 
            border-radius: 10px; 
            margin-left: 8px; 
            font-size: 10px; 
            font-weight: 900; 
            border: 1px solid rgba(255,255,255,0.1);
        }

        @keyframes pulse-cart { 
            0% { box-shadow: 0 0 0 0 rgba(255, 107, 0, 0.7); } 
            70% { box-shadow: 0 0 0 15px rgba(255, 107, 0, 0); } 
            100% { box-shadow: 0 0 0 0 rgba(255, 107, 0, 0); } 
        }
        .cart-has-items { animation: pulse-cart 2s infinite; }
    </style>
</head>

<body class="dark-mode">

    <button id="go-up" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">
        <i class="fas fa-arrow-up"></i>
    </button>

    <header>
        <div class="bg-gray-900 text-gray-300 py-2.5 overflow-hidden border-b border-gray-800">
            <div class="animate-marquee gap-12 font-black text-[10px] uppercase tracking-[0.25em]">
                <span>üöÄ ENV√çOS EN EL D√çA (PED√ç ANTES DE LAS 12:30HS)</span>
                <span>üî• LOS MEJORES PRECIOS DE VIEDMA Y PATAGONES</span>
                <span>‚ú® DISTRI EL URU - CALIDAD Y CONFIANZA</span>
                <span>üöÄ ENV√çOS EN EL D√çA (PED√ç ANTES DE LAS 12:30HS)</span>
                <span>üî• LOS MEJORES PRECIOS DE VIEDMA Y PATAGONES</span>
            </div>
        </div>

        <div id="status-bar" class="py-2.5 px-4 text-center border-b border-gray-800 text-white font-black text-[11px] uppercase tracking-widest transition-all duration-700">
            <p id="status-text">Cargando estado del servicio...</p>
        </div>
    </header>

    <nav class="bg-[#2c2c2c] sticky top-0 z-50 p-4 shadow-2xl border-b border-gray-700">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-4">
                <div class="relative">
                    <img src="https://i.ibb.co/yB7ffL4T/unnamed.jpg" class="w-14 h-14 rounded-full border-2 border-[#ff6b00] bg-gray-800 object-cover shadow-lg">
                    <div class="absolute -bottom-1 -right-1 w-5 h-5 bg-green-500 border-2 border-[#2c2c2c] rounded-full"></div>
                </div>
                <div>
                    <h1 class="text-xl font-black italic text-[#ff6b00] uppercase leading-none tracking-tighter">El Uru</h1>
                    <span class="text-[9px] text-gray-400 font-bold tracking-widest uppercase">Distribuidora Mayorista</span>
                </div>
                <button onclick="toggleTheme()" class="ml-2 w-10 h-10 rounded-xl bg-gray-800 text-gray-400 hover:text-white transition-colors">
                    <i id="theme-icon" class="fas fa-moon"></i>
                </button>
            </div>

            <div class="flex items-center gap-3">
                <a href="tel:5492920248292" class="hidden md:flex bg-gray-800 text-white p-4 rounded-2xl border border-gray-700 active:scale-90 transition-transform">
                    <i class="fas fa-phone"></i>
                </a>
                <button id="cart-btn" onclick="openCart()" class="bg-[#ff6b00] text-white px-6 py-4 rounded-2xl font-black shadow-xl flex items-center gap-3 text-sm active:scale-95 transition-all">
                    <i class="fas fa-shopping-basket text-lg"></i> 
                    <span id="count" class="bg-white text-[#ff6b00] px-2 py-0.5 rounded-lg text-xs">0</span>
                </button>
            </div>
        </div>
    </nav>

    <section class="p-4 max-w-5xl mx-auto space-y-6">
        <div class="relative flex gap-3">
            <div class="relative flex-1 group">
                <input type="text" id="search" onkeyup="render()" placeholder="¬øQu√© est√°s buscando hoy?" 
                       class="w-full p-5 pl-14 rounded-[2rem] bg-gray-800 text-gray-200 font-bold border-2 border-transparent outline-none focus:border-[#ff6b00] focus:ring-4 focus:ring-[#ff6b00]/10 transition-all shadow-inner">
                <i class="fas fa-search absolute left-6 top-1/2 -translate-y-1/2 text-gray-500 group-focus-within:text-[#ff6b00] transition-colors"></i>
            </div>
            
            <button onclick="verFavoritos()" id="btn-favs" class="bg-gray-800 px-6 rounded-[2rem] text-gray-400 border border-gray-700 active:scale-90 transition-all hover:bg-gray-700">
                <i class="fas fa-heart text-xl"></i>
            </button>
            
            <button onclick="compartirCatalogo()" class="bg-gray-800 px-6 rounded-[2rem] text-[#ff6b00] border border-gray-700 active:scale-90 transition-all hover:bg-gray-700">
                <i class="fas fa-share-nodes text-xl"></i>
            </button>
        </div>

        <div id="category-filters" class="flex gap-3 overflow-x-auto pb-4 no-scrollbar scroll-smooth">
            </div>
    </section>

    <main class="max-w-7xl mx-auto px-4 pb-28">
        <div id="catalogo" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-8">
            <div class="skeleton h-80"></div>
            <div class="skeleton h-80"></div>
            <div class="skeleton h-80"></div>
            <div class="skeleton h-80"></div>
            <div class="skeleton h-80"></div>
        </div>
    </main>

    <footer class="bg-gray-900 text-gray-300 border-t-8 border-[#ff6b00]">
        <div class="max-w-7xl mx-auto px-6 py-20">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16">
                
                <div class="space-y-8 text-center lg:text-left">
                    <div class="flex flex-col items-center lg:items-start gap-5">
                        <img src="https://i.ibb.co/yB7ffL4T/unnamed.jpg" class="w-24 h-24 rounded-full border-4 border-gray-800 shadow-2xl">
                        <div>
                            <h2 class="text-4xl font-black italic uppercase text-[#ff6b00] leading-none tracking-tighter">Distri El Uru</h2>
                            <p class="text-sm text-gray-500 font-bold mt-2 tracking-[0.3em]">VIEDMA - R√çO NEGRO</p>
                        </div>
                    </div>
                    <p class="text-base text-gray-400 leading-relaxed max-w-md mx-auto lg:mx-0 font-medium">
                        Tu aliado estrat√©gico en el crecimiento de tu comercio. Brindamos el mejor servicio de log√≠stica y distribuci√≥n de bebidas de la zona.
                    </p>
                    <div class="flex justify-center lg:justify-start gap-4">
                        <a href="https://www.instagram.com/distri_el_uru/" target="_blank" class="w-14 h-14 bg-gradient-to-tr from-[#f09433] via-[#dc2743] to-[#bc1888] text-white rounded-2xl flex items-center justify-center shadow-lg hover:-translate-y-1 transition-transform">
                            <i class="fab fa-instagram text-2xl"></i>
                        </a>
                        <a href="https://wa.me/5492920248292" target="_blank" class="w-14 h-14 bg-green-600 text-white rounded-2xl flex items-center justify-center shadow-lg hover:-translate-y-1 transition-transform">
                            <i class="fab fa-whatsapp text-2xl"></i>
                        </a>
                    </div>
                </div>

                <div class="space-y-8">
                    <div class="bg-gray-800/40 p-8 rounded-[3rem] border border-gray-700/50 shadow-2xl backdrop-blur-sm">
                        <h3 class="text-[#ff6b00] font-black uppercase text-sm tracking-[0.2em] mb-8 flex items-center gap-3">
                            <i class="fas fa-truck-fast"></i> INFORMACI√ìN DE ENV√çO
                        </h3>
                        <ul class="space-y-6">
                            <li class="flex flex-col gap-1 border-b border-gray-700/50 pb-4">
                                <span class="text-[10px] text-gray-500 font-black uppercase tracking-widest">Cierre de Pedidos</span>
                                <span class="text-xl text-white font-bold">12:30 HS (Martes a S√°bado)</span>
                            </li>
                            <li class="flex flex-col gap-1 border-b border-gray-700/50 pb-4">
                                <span class="text-[10px] text-gray-500 font-black uppercase tracking-widest">Tiempo de Entrega</span>
                                <span class="text-xl text-white font-bold">En el d√≠a / 24hs M√°ximo</span>
                            </li>
                            <li class="flex flex-col gap-1">
                                <span class="text-[10px] text-gray-500 font-black uppercase tracking-widest">Zonas de Cobertura</span>
                                <span class="text-xl text-[#ff6b00] font-black italic uppercase">VIEDMA Y PATAGONES</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="space-y-6">
                    <h3 class="text-[#ff6b00] font-black uppercase text-sm tracking-[0.2em] flex items-center justify-center lg:justify-start gap-3">
                        <i class="fas fa-location-dot"></i> PUNTO DE DISTRIBUCI√ìN
                    </h3>
                    <div class="h-64 rounded-[3rem] overflow-hidden grayscale contrast-125 border-4 border-gray-800 shadow-2xl group hover:grayscale-0 transition-all duration-1000">
                        <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d12000!2d-63!3d-40!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNDDCsDAwJzAwLjAiUyA2M8KwMDAnMDAuMCJX!5e0!3m2!1ses!2sar!4v1700000000000" 
                                width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                    </div>
                </div>

            </div>

            <div class="mt-20 pt-10 border-t border-gray-800 flex flex-col md:flex-row justify-between items-center gap-6">
                <p class="text-[11px] font-black text-gray-600 uppercase tracking-[0.5em]">¬© 2026 DISTRI EL URU | Premium Warehouse</p>
                <div class="flex gap-8 opacity-20 grayscale">
                    <i class="fab fa-cc-visa text-3xl"></i>
                    <i class="fab fa-cc-mastercard text-3xl"></i>
                    <i class="fas fa-wallet text-3xl"></i>
                </div>
            </div>
        </div>
    </footer>

    <div id="cart" style="display:none;" class="fixed inset-0 bg-black/90 backdrop-blur-2xl z-[200] flex justify-end">
        <div class="bg-[#1a1a1a] w-full max-w-md h-full flex flex-col shadow-[-20px_0_60px_rgba(0,0,0,0.8)] border-l border-gray-800">
            
            <div class="p-8 border-b border-gray-800 flex justify-between items-center bg-gray-900/50">
                <div>
                    <h2 class="text-2xl font-black uppercase italic text-[#ff6b00] tracking-tighter">Mi Pedido</h2>
                    <p class="text-[10px] text-gray-500 font-black uppercase tracking-[0.2em] mt-1">M√≠nimo requerido: $25.000</p>
                </div>
                <div class="flex items-center gap-5">
                    <button onclick="copiarPedido()" class="text-gray-500 hover:text-white transition-colors" title="Copiar como texto">
                        <i class="fas fa-copy text-xl"></i>
                    </button>
                    <button onclick="closeCart()" class="text-4xl text-gray-600 hover:text-white transition-colors">&times;</button>
                </div>
            </div>
            
            <div id="cart-items" class="flex-1 overflow-y-auto p-6 space-y-4 bg-transparent no-scrollbar">
                </div>
            
            <div class="p-8 bg-gray-900/80 border-t border-gray-800 space-y-5">
                
                <div id="min-warning" class="bg-black/40 p-5 rounded-[2rem] border border-gray-700/50">
                    <p id="min-text" class="text-[11px] font-black uppercase text-center mb-2 tracking-widest transition-all"></p>
                    <div id="min-purchase-bar">
                        <div id="min-purchase-fill"></div>
                    </div>
                </div>

                <div class="space-y-3">
                    <input type="text" id="user-name" oninput="saveUserData()" placeholder="Nombre del Local / Cliente" 
                           class="w-full p-5 rounded-2xl bg-gray-800 text-white font-bold border border-gray-700 outline-none focus:border-[#ff6b00] transition-all">
                    <input type="text" id="user-address" oninput="saveUserData()" placeholder="Direcci√≥n de Entrega" 
                           class="w-full p-5 rounded-2xl bg-gray-800 text-white font-bold border border-gray-700 outline-none focus:border-[#ff6b00] transition-all">
                </div>
                
                <div class="flex justify-between items-end pt-4">
                    <div class="flex flex-col">
                        <span class="text-[10px] text-gray-500 font-black uppercase tracking-widest">Subtotal Estimado</span>
                        <button onclick="vaciarCarrito()" class="text-[10px] text-red-500 font-black uppercase mt-1 hover:underline text-left">Vaciar Todo</button>
                    </div>
                    <span class="text-[#ff6b00] text-4xl font-black italic tracking-tighter">$<span id="total">0</span></span>
                </div>
                
                <button id="btn-whatsapp" onclick="enviarPedido()" 
                        class="btn-disabled w-full bg-green-500 text-white py-6 rounded-[2rem] font-black text-lg active:scale-95 transition-all shadow-[0_10px_30px_rgba(34,197,94,0.3)] flex items-center justify-center gap-4">
                    <i class="fab fa-whatsapp text-2xl"></i> FINALIZAR POR WHATSAPP
                </button>
            </div>
        </div>
    </div>

    <script>
        // CONFIGURACI√ìN GLOBAL
        const TSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQEemzCvTezcjzZhIUIRIayZ7U81xgssl9G1Vr6Odx7dHGHOARY0iJ-VOL43E17qLVkiIRb0LTurcZU/pub?output=tsv';
        const MIN_COMPRA = 25000;
        
        let database = [];
        let shoppingCart = {};
        let currentCategory = 'TODOS';
        let showFavoritesOnly = false;
        let userFavorites = JSON.parse(localStorage.getItem('uru_favs')) || [];

        // INICIALIZACI√ìN
        window.onload = () => {
            // Cargar datos de usuario recordados
            document.getElementById('user-name').value = localStorage.getItem('uru_name') || '';
            document.getElementById('user-address').value = localStorage.getItem('uru_address') || '';
            
            // Iniciar carga de datos
            fetchDatabase();
        };

        // GESTI√ìN DE DATOS DE USUARIO
        function saveUserData() {
            localStorage.setItem('uru_name', document.getElementById('user-name').value);
            localStorage.setItem('uru_address', document.getElementById('user-address').value);
        }

        // CARGA DESDE GOOGLE SHEETS
        async function fetchDatabase() {
            try {
                const response = await fetch(TSV_URL + '&cache_bust=' + Date.now());
                const rawText = await response.text();
                const rows = rawText.split(/\r?\n/).slice(1);
                
                database = rows.map((row, index) => {
                    const columns = row.split('\t');
                    return {
                        id: index,
                        nombre: (columns[0] || '').trim(),
                        precio: parseInt((columns[1] || '').replace(/\D/g, '')) || 0,
                        categoria: (columns[2] || 'VARIOS').trim().toUpperCase(),
                        imagen: (columns[3] || '').trim()
                    };
                }).filter(p => p.nombre !== "");

                buildCategories();
                setTimeout(render, 600); // Efecto visual skeleton
                checkBusinessStatus();
                setInterval(checkBusinessStatus, 60000);
            } catch (error) {
                console.error("Error cargando base de datos:", error);
            }
        }

        // ESTADO DE HORARIO (L√ìGICA DE CIERRE)
        function checkBusinessStatus() {
            const now = new Date();
            const hours = now.getHours();
            const minutes = now.getMinutes();
            const textElement = document.getElementById('status-text');
            const barElement = document.getElementById('status-bar');
            
            // Cierre 12:30hs
            if (hours < 12 || (hours === 12 && minutes <= 30)) {
                barElement.style.backgroundColor = "#16a34a";
                textElement.innerHTML = "üü¢ ABIERTO: Recibiendo pedidos para entrega HOY MISMO";
                if (hours === 12) barElement.classList.add('urgent');
            } else {
                barElement.style.backgroundColor = "#ea580c";
                textElement.innerHTML = "üïí CIERRE DE LOG√çSTICA: Pedidos recibidos ahora se entregan MA√ëANA";
                barElement.classList.remove('urgent');
            }
        }

        // RENDERIZADO DE CATEGOR√çAS
        function buildCategories() {
            const uniqueCats = ['TODOS', ...new Set(database.map(p => p.categoria))];
            const container = document.getElementById('category-filters');
            
            container.innerHTML = uniqueCats.map(cat => {
                const count = cat === 'TODOS' ? database.length : database.filter(p => p.categoria === cat).length;
                const isActive = currentCategory === cat ? 'cat-active' : '';
                return `
                    <button onclick="setCategory('${cat}')" class="shrink-0 px-8 py-4 rounded-full bg-gray-800 text-[11px] font-black uppercase text-gray-400 transition-all flex items-center ${isActive}">
                        ${cat}
